@startuml sitemap

title neochibu - Site Map / IA

skinparam shadowing false
skinparam packageStyle rectangle
skinparam wrapWidth 200
skinparam defaultTextAlignment left

' ルート
rectangle "Home / Landing" as HOME
rectangle "Auth\n- Wallet Connect\n- 匿名利用(任意)\n- 利用規約/同意" as AUTH

' 公開エリア（未ログインでも閲覧可）
package "Public (未ログイン可)" {
  rectangle "About\n- サービス概要\n- プライバシーポリシー\n- 利用規約" as ABOUT
  rectangle "Explore Rooms\n- カテゴリ(会話/AI/音)\n- 検索/フィルター\n- ランキング/新着" as EXPLORE
  rectangle "Room Details\n- ルーム説明\n- 料金/入室条件\n- 提供者プロフィール\n- レビュー/評価一覧" as ROOM_DETAIL
  rectangle "Help Center\n- よくある質問\n- ガイド/安全ポリシー\n- 通報/問い合わせ" as HELP
}

' 認証後アプリ
package "App (認証後)" {
  package "Rooms" {
    rectangle "My Rooms (入室履歴)\n- 継続/再入室\n- お気に入り" as MY_ROOMS
    rectangle "Join Room (入室)\n- WebRTC接続\n- AI補助ON/OFF\n- 翻訳ON/OFF\n- タイマー/課金" as JOIN
    rectangle "Rate Room (評価)\n- 星/コメント\n- 通報" as RATE
  }

  package "Host Dashboard (提供者)" {
    rectangle "Create Room\n- 種別(会話/AI/音)\n- 料金(無料/入室/時間)\n- 人数/条件\n- 可視性ブースト" as CREATE
    rectangle "Manage Rooms\n- 状態(公開/停止)\n- 上位表示(コイン消費)\n- 参加者管理" as MANAGE
    rectangle "Earnings\n- 収益/引出\n- 評価/レビュー分析" as EARN
  }

  package "Shop" {
    rectangle "Catalog\n- 骨伝導SPK\n- 枕\n- ASMRマイク" as CATALOG
    rectangle "Product Detail" as PDP
    rectangle "Cart / Checkout\n- コイン/暗号支払い\n- 注文完了" as CHECKOUT
    rectangle "Orders\n- 注文履歴/配送状況" as ORDERS
  }

  package "Account" {
    rectangle "Profile\n- 表示名/アイコン\n- 通知/言語\n- 匿名設定" as PROFILE
    rectangle "Wallet & Payments\n- 残高\n- 入出金\n- トランザクション履歴(暗号化表示)" as WALLET
    rectangle "Security & Privacy\n- 端末/セッション\n- ログ公開範囲\n- データ削除要求" as SEC
  }

  package "DAO / Community" {
    rectangle "Proposals\n- 提案一覧/詳細\n- ディスカッション" as PROPOSALS
    rectangle "Vote\n- 賛成/反対/棄権\n- 重み/結果" as VOTE
    rectangle "Revenue Share\n- 分配モデル確認\n- 受取/クレーム" as REVENUE
  }
}

' アダルト専用入口（別ゲート）
package "Adult Gateway (18+ 別入口)" {
  rectangle "Age Verification\n- KYC or ZK年齢証明\n- 成功時トークン付与" as AGE
  rectangle "Adult Rooms Index\n- カテゴリ/検索\n- ランキング" as ADULT_IDX
  rectangle "Adult Room Details" as ADULT_DETAIL
  rectangle "Join Adult Room\n- 別経路\n- ログ暗号化/匿名化" as ADULT_JOIN
}

' 主要遷移
HOME --> ABOUT
HOME --> EXPLORE
HOME --> HELP
HOME --> AUTH

EXPLORE --> ROOM_DETAIL
ROOM_DETAIL --> AUTH : 入室/購入時

AUTH --> MY_ROOMS
AUTH --> PROFILE
AUTH --> EXPLORE

MY_ROOMS --> JOIN
ROOM_DETAIL --> JOIN : 認証済みなら直接入室
JOIN --> RATE

' 提供者導線
PROFILE --> CREATE
CREATE --> MANAGE
MANAGE --> EARN

' ショップ導線
HOME --> CATALOG
EXPLORE --> CATALOG : プロモ連動(任意)
CATALOG --> PDP
PDP --> CHECKOUT
CHECKOUT --> ORDERS
PROFILE --> ORDERS

' アカウント
PROFILE --> WALLET
PROFILE --> SEC

' DAO
HOME --> PROPOSALS
PROPOSALS --> VOTE
VOTE --> PROPOSALS
PROFILE --> REVENUE

' アダルトゲート
HOME --> AGE : 「Adults (18+)」リンクはフッター等に配置
AGE --> ADULT_IDX : OK時のみ
ADULT_IDX --> ADULT_DETAIL
ADULT_DETAIL --> ADULT_JOIN
ADULT_JOIN --> RATE

' 相互参照（軽めのリンク）
HELP ..> SEC : プライバシー関連参照
ROOM_DETAIL ..> HELP : 安全ポリシー
JOIN ..> HELP : 緊急退出/通報方法

@enduml
